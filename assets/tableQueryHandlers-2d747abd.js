import{l as c}from"./index-643c5ae5.js";import{aI as _,aJ as N,aK as I}from"./SynapseClient-ceb0e6d4.js";import{g as l,B as T}from"./getEndpoint-ac94413e.js";import{c as f,B as D,n as R,r as g,o as O,p as M,s as U,q as A}from"./SynapseConstants-567f6998.js";import{u as E}from"./uniqueId-4d05949d.js";import{c as B}from"./cloneDeep-8a8b372e.js";const y=new Map;function S(a,t,e,o=l(T.REPO_ENDPOINT)){return[c.rest.post(`${o}${a}`,async(s,r,n)=>{const m=E();return y.set(m,{request:await s.json(),response:e}),r(n.status(201),n.json({token:m}))}),c.rest.get(`${o}${_(":id")}`,async(s,r,n)=>{const m=s.params.id,u=y.get(m);if(!m||!u)return r(n.status(404),n.json({message:"The mocked asynchronous job was not found"}));const{request:d,response:i}=u,p=typeof i=="function"?i(d):i;return r(n.status(201),n.json({jobState:"COMPLETE",jobCanceling:!1,requestBody:d,etag:"00000000-0000-0000-0000-000000000000",jobId:m,responseBody:p,startedByUserId:0,startedOn:"",changedOn:"",progressMessage:"",progressCurrent:100,progressTotal:100,exception:"",errorMessage:"",errorDetails:"",runtimeMS:100}))}),c.rest.get(`${o}${t(":asyncJobToken")}`,async(s,r,n)=>{const m=s.params.asyncJobToken,u=y.get(m);if(!m||!u)return r(n.status(404),n.json({message:"The mocked asynchronous job was not found"}));const{request:d,response:i}=u,p=typeof i=="function"?i(d):i;return r(n.status(201),n.json(p))})]}const b=[{name:"id",columnType:"ENTITYID",id:"81721"},{name:"name",columnType:"STRING",id:"81722",maximumSize:256},{name:"description",columnType:"STRING",id:"87941",maximumSize:1e3},{name:"createdOn",columnType:"DATE",facetType:"range",id:"81723"},{name:"createdBy",columnType:"USERID",facetType:"enumeration",id:"81724"},{name:"etag",columnType:"STRING",id:"81725",maximumSize:36},{name:"modifiedOn",columnType:"DATE",facetType:"range",id:"81726"},{name:"modifiedBy",columnType:"USERID",facetType:"enumeration",id:"81727"},{name:"type",columnType:"STRING",facetType:"enumeration",id:"196992",maximumSize:20},{name:"currentVersion",columnType:"INTEGER",id:"81729"},{name:"parentId",columnType:"ENTITYID",facetType:"enumeration",id:"81730"},{name:"benefactorId",columnType:"ENTITYID",id:"81731"},{name:"projectId",columnType:"ENTITYID",facetType:"enumeration",id:"81732"},{name:"dataFileHandleId",columnType:"FILEHANDLEID",id:"81733"},{name:"dataFileName",columnType:"STRING",id:"199088",maximumSize:256},{name:"dataFileSizeBytes",columnType:"INTEGER",id:"112368"},{name:"dataFileMD5Hex",columnType:"STRING",id:"112369",maximumSize:100},{name:"dataFileConcreteType",columnType:"STRING",facetType:"enumeration",id:"196995",maximumSize:65},{name:"dataFileBucket",columnType:"STRING",facetType:"enumeration",id:"196996",maximumSize:100},{name:"dataFileKey",columnType:"STRING",id:"184972",maximumSize:700}],C={[f]:"queryResult",[D]:"queryCount",[R]:"selectColumns",[g]:"maxRowsPerPage",[O]:"columnModels",[M]:"facets",[U]:"sumFileSizes",[A]:"lastUpdatedOn"};function L(a,t){const e=B(a);return Object.entries(C).forEach(([o,s])=>{t&parseInt(o)||delete e[s]}),e}function z(a,t=l(T.REPO_ENDPOINT)){return S(I(":id"),e=>N(":entityId",e),e=>L(a,e.partMask),t)}function K(a,t=l(T.REPO_ENDPOINT)){return S("/repo/v1/column/view/scope/async/start",e=>`/repo/v1/column/view/scope/async/get/${e}`,a,t)}function k(a=l(T.REPO_ENDPOINT)){return[c.rest.get(`${a}/repo/v1/column/tableview/defaults`,async(t,e,o)=>e(o.status(200),o.json({concreteType:"org.sagebionetworks.repo.model.table.ColumnModel",list:b})))]}function J(a=l(T.REPO_ENDPOINT)){return c.rest.post(`${a}/repo/v1/column/batch`,async(t,e,o)=>{const{list:s}=await t.json();return s.forEach(r=>{r.id||(r.id=E())}),e(o.status(201),o.json({concreteType:"org.sagebionetworks.repo.model.table.ColumnModel",list:s}))})}export{k as a,K as b,J as c,z as g};
//# sourceMappingURL=tableQueryHandlers-2d747abd.js.map
