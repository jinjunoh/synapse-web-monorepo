import{j as e}from"./jsx-runtime-CKrituN3.js";import{r as f}from"./index-CBqU2yxZ.js";import{F as w}from"./index-C-UbkUMQ.js";import{n as T,a as D}from"./SynapseConstants-8sEa_Tkp.js";import"./getEndpoint-CjoHA800.js";import{h as V,z as U,k as A}from"./ApplicationSessionManager-CZGL6_Dw.js";import{g as d}from"./queryUtils-BuKQre9o.js";import{u as F}from"./useShowDesktop-ZDAnySaz.js";import{u as H}from"./useGetQueryResultBundle-yTCjMWvq.js";import{E as O}from"./ExpandableContent-DvOnpf2C.js";import{Q as S}from"./QueryCount-D94J2XYQ.js";import{B as C}from"./Button-BOCcoe4v.js";function x({link:n,summary:r,countSql:o,title:l}){const c=e.jsxs("div",{className:"Goals__Mobile__Header",children:[o&&e.jsx("span",{className:"Goals__Mobile__Header__Count",children:e.jsx(S,{parens:!1,query:{sql:o}})}),e.jsxs("span",{className:"Goals__Mobile__Header__Title",children:[" ",l," "]})]}),m=e.jsxs("div",{className:"Goals__Mobile__Content",children:[e.jsx("p",{children:r}),e.jsx(C,{variant:"contained",color:"secondary",className:"Goals__Mobile__Content__Link",href:n,children:"Explore"})]});return e.jsx(O,{title:c,content:m})}try{x.displayName="GoalsMobile",x.__docgenInfo={description:"",displayName:"GoalsMobile",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}function h({asset:n,link:r,summary:o,countSql:l,title:c}){return e.jsxs("div",{className:"Goals__Card",children:[e.jsx("div",{className:"Goals__Card__header",style:{background:`url('${n}')`},children:e.jsxs("p",{children:[e.jsxs("span",{className:"Goals__Card__header__title",children:[" ",c," "]}),l&&e.jsx("span",{className:"Goals__Card__header__count",children:e.jsx(S,{parens:!1,query:{sql:l}})})]})}),e.jsxs("div",{className:"Goals__Card__summary",children:[e.jsxs("p",{children:[" ",o," "]}),e.jsx(C,{className:"Goals__Card__summary__link",variant:"contained",color:"secondary",href:r,children:"Explore"})]})]})}try{h.displayName="GoalsDesktop",h.__docgenInfo={description:"",displayName:"GoalsDesktop",props:{countSql:{defaultValue:null,description:"",name:"countSql",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},summary:{defaultValue:null,description:"",name:"summary",required:!0,type:{name:"string"}},link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"string"}}}}}catch{}const B=1200,N=n=>{const{entityId:r}=n,{accessToken:o}=V(),[l,c]=f.useState(),[m,g]=f.useState(),q=F(B),I={concreteType:"org.sagebionetworks.repo.model.table.QueryBundleRequest",entityId:r,partMask:T|D,query:{sql:`select * from ${r} order by ItemOrder`}},{data:s}=H(I);f.useEffect(()=>{(async()=>{try{const i=d("Asset",s),t=(s==null?void 0:s.queryResult.queryResults.rows.map(a=>a.values[i]))??[];if(t.some(a=>a===null)&&console.warn("Row has null value(s) when no nulls expected"),t.length===0)return;const u={includeFileHandles:!1,includePreSignedURLs:!0,includePreviewPreSignedURLs:!1,requestedFiles:t.map(a=>({associateObjectId:r,associateObjectType:w.TableEntity,fileHandleId:a}))},y=await A(u,o);g(void 0),c(y.requestedFiles.filter(a=>a.preSignedURL!==void 0).map(a=>a.preSignedURL))}catch(i){console.error("Error on get data",i),g(i)}})()},[r,o,s]);const j=d("TableId",s),p=d("CountSql",s),b=d("Title",s),k=d("Summary",s),v=d("Link",s);return e.jsxs("div",{className:`Goals${q?"__Desktop":""}`,children:[m&&e.jsx(U,{error:m}),s==null?void 0:s.queryResult.queryResults.rows.map((G,i)=>{const t=G.values;t.some(M=>M===null)&&console.warn("Row has null value(s) when no nulls expected");const _=j>-1?t[j]:void 0;let u;p>-1&&t[p]?u=t[p]:_&&(u=`SELECT * FROM ${_}`);const y=t[b],a=t[k],R=t[v],L=(l==null?void 0:l[i])??"",E={countSql:u,title:y,summary:a,link:R,asset:L};return q?e.jsx(h,{...E}):e.jsx(x,{...E})})]})};try{N.displayName="Goals",N.__docgenInfo={description:"",displayName:"Goals",props:{entityId:{defaultValue:null,description:"",name:"entityId",required:!0,type:{name:"string"}}}}}catch{}export{N as G};
