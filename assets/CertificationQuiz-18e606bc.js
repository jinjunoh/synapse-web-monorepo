import{a as s,j as n,F as y}from"./jsx-runtime-9dc53467.js";import{r as l,R as E}from"./index-76fb7be0.js";import{v as Q,w as z,x as w}from"./SynapseClient-ceb0e6d4.js";import{c as H}from"./index-7db48dfb.js";import"./getEndpoint-ac94413e.js";import"./OrientationBanner-1c6f5b11.js";import{d as p}from"./ToastMessage-02301a16.js";import{M as B}from"./SynapseTableCell-a0770d03.js";import{T as m}from"./Typography-10432b83.js";import{L}from"./Link-980677d0.js";import{B as x}from"./Button-6cf38875.js";import{H as v}from"./IconSvg-3c89f0af.js";const C=()=>{const{accessToken:i}=Q(),T=z(),[t,_]=l.useState(),[d,u]=l.useState([]),[r,h]=l.useState(),f=E.useRef(null),I="https://help.synapse.org/docs/Getting-Started.2055471150.html",g=async()=>{try{_(await w.getCertifyQuiz(i))}catch(e){T(e)}};l.useEffect(()=>{g()},[i]);const R=(e,a)=>{const c=[...d.filter(o=>o.questionIndex!==e),{questionIndex:e,answerIndex:[a],concreteType:H}];u(c)},S=()=>{var e;(e=f.current)==null||e.reset(),u([]),h(void 0),g()},k=async()=>{try{if(t&&t.questions.length===d.length){const e={quizId:t.id,questionResponses:d},a=await w.postCertifiedUserTestResponse(i,e);h(a),window.scrollTo(0,0)}else p("Please answer all of the questions and try again.","warning")}catch(e){p(e.reason,"danger")}},b=e=>e?{content:n(y,{children:"More info"}),closePopoverOnClick:!0,onClick:()=>window.open(e,"_blank"),color:"primary"}:void 0;return s("div",{className:"bootstrap-4-backport CertificationQuiz",children:[r&&n("div",{children:s(y,{children:[!r.passed&&n("div",{className:"failBanner",children:"Quiz Failed"}),s(m,{variant:"hintText",children:["Score: ",r.score," / ",t==null?void 0:t.questions.length]}),r.passed?p(`You passed the Synapse Certification Quiz on ${r.passedOn}`,"success"):s(m,{variant:"body1",children:["Please review the items shown in red below, and"," ",n(L,{href:"#",onClick:e=>{e.preventDefault(),S()},children:"try again"}),"."]})]})}),s("div",{className:"CertificationQuiz__container",children:[s(x,{onClick:()=>window.open(I,"_blank"),className:"help-button",color:"secondary",variant:"contained",children:[n(v,{className:"HelpButton",style:{marginRight:"4px"}}),"Help"]}),t?n("div",{dangerouslySetInnerHTML:{__html:t.header}}):"",n("form",{ref:f,onSubmit:e=>e.preventDefault(),children:n("ol",{children:t==null?void 0:t.questions.map(e=>{var a,c;return s("li",{role:e.exclusive?"radiogroup":void 0,children:[n("div",{dangerouslySetInnerHTML:{__html:e.prompt},className:r&&((c=(a=r.corrections)==null?void 0:a.find(o=>o.question.questionIndex===e.questionIndex))!=null&&c.isCorrect?"":"incorrectQuestion")}),e.answers.map(o=>s("div",{children:[n("input",{id:`${e.questionIndex}-${o.answerIndex}`,name:`${e.questionIndex}`,type:e.exclusive?"radio":"checkbox",value:o.answerIndex,onClick:N=>R(e.questionIndex,Number(N.currentTarget.value)),disabled:!!r}),n("label",{style:{fontWeight:400},htmlFor:`${e.questionIndex}-${o.answerIndex}`,children:o.prompt})]},`${e.questionIndex}-${o.answerIndex}`)),n(B,{contentProps:{markdown:e.helpText},placement:"right",actionButton:b(e.docLink),showCloseButton:!0,children:s(m,{variant:"hintText",color:"primary",children:[n(v,{className:"HelpButton",style:{marginRight:"4px"}}),"Need help answering this question?"]})})]},e.questionIndex)})})}),!r&&n(x,{className:"help-button",color:"primary",variant:"contained",size:"large",onClick:()=>{k()},children:"Submit"})]})]})};try{C.displayName="CertificationQuiz",C.__docgenInfo={description:"",displayName:"CertificationQuiz",props:{}}}catch{}export{C};
//# sourceMappingURL=CertificationQuiz-18e606bc.js.map
