import{a as p,j as o}from"./jsx-runtime-9dc53467.js";import{r as a}from"./index-76fb7be0.js";import{B as N,L as D,C as b}from"./SynapseTableCell-a0770d03.js";import{g as x,M as w,A as F,a as I,b as O,c as P,B as J,E as q,T as M,D as B,d as R}from"./ErrorListTemplate-9ac64efc.js";import"./isPlainObject-ad60ab85.js";import"./mapValues-c1561695.js";import"./index.modern-42b48b42.js";import"./index-c71daf5e.js";import{p as j}from"./papaparse.min-8c9ba15c.js";import{a as k,C as L}from"./_getTag-a0ec24ca.js";import{B as T}from"./Box-ddce9904.js";import{B as y}from"./Button-6cf38875.js";import{T as W}from"./TextField-0ffe3a62.js";import{A as H}from"./Alert-34cc4490.js";import{A as U}from"./AlertTitle-1d33b140.js";import{T as $}from"./Typography-10432b83.js";const G={jsonSchemaDefinition:{type:"string"}};function K(n=G){const{jsonSchemaDefinition:t}=n,i=a.useMemo(()=>k(t)&&t.type&&t.type==="string",[t]);return{parse:a.useCallback(l=>new Promise((s,u)=>{j.parse(l,{dynamicTyping:!i,complete:r=>{r.errors.length>0?u(r.errors):s(r.data.flat())}})}),[i])}}const A={type:"string"};function Y(n=A){return{$schema:"http://json-schema.org/draft-07/schema#",type:"array",items:n}}function h(n){const{value:t=[],onChange:i,onSubmit:f,arrayItemDefinition:l=A,formRef:s}=n,[u,r]=a.useState(!1),[m,d]=a.useState(""),[c,g]=a.useState([]),V=a.useMemo(()=>Y(l),[l]),{parse:S}=K({jsonSchemaDefinition:l}),v=a.useCallback(async()=>{if(m)try{const e=await S(m);i([...t,...e]),g([]),d(""),r(!1)}catch(e){g(e)}},[i,m,t,S]),E=a.useMemo(()=>x(),[]);return p(T,{className:"JsonSchemaFormContainer",sx:{".JsonSchemaForm .LabelContainer":{display:"none",visibility:"hidden"}},children:[o(w,{ref:s,schema:V,className:"JsonSchemaForm",noHtml5Validate:!0,uiSchema:{"ui:submitButtonOptions":{norender:!0}},validator:N,formData:t,formContext:{allowRemovingLastItemInArray:!0},onChange:({formData:e})=>i(e),onSubmit:({formData:e})=>f(e),templates:{ArrayFieldDescriptionTemplate:F,ArrayFieldItemTemplate:I,ArrayFieldTemplate:O,ArrayFieldTitleTemplate:P,ButtonTemplates:J,ErrorListTemplate:q},transformErrors:E,widgets:{TextWidget:M,DateTimeWidget:B,SelectWidget:D,CheckboxWidget:R}}),o(y,{onClick:()=>r(!0),children:"Paste new values"}),p(L,{sx:{mt:2},in:u,children:[o(W,{multiline:!0,InputProps:{inputProps:{"aria-label":"CSV or TSV to Append"}},rows:5,placeholder:"Place comma or tab delimited values here",value:m,onChange:e=>d(e.target.value)}),p(T,{my:1,display:"flex",justifyContent:"flex-end",children:[o(y,{onClick:()=>r(!1),children:"Cancel"}),o(y,{onClick:()=>{v()},children:"Add"})]}),c&&c.length>0&&p(H,{severity:"error",sx:{my:2},children:[o(U,{children:"Parsing errors encountered:"}),o("ul",{children:c.map((e,_)=>p($,{component:"li",lineHeight:1.5,variant:"smallText1",children:[e.row?`At ${e.row}: `:"",e.message]},_))})]})]})]})}try{h.displayName="JSONArrayEditor",h.__docgenInfo={description:"",displayName:"JSONArrayEditor",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[]"}},arrayItemDefinition:{defaultValue:null,description:"",name:"arrayItemDefinition",required:!1,type:{name:"JSONSchema7Definition"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValue: T[]) => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(formData: T[]) => void"}},formRef:{defaultValue:null,description:"",name:"formRef",required:!1,type:{name:"Ref<Form<T, RJSFSchema, GenericObjectType>>"}}}}}catch{}function C(n){const{isShowingModal:t,onConfirm:i,onCancel:f,dialogTitle:l="Edit Values",value:s,...u}=n,r=a.useRef(null),[m,d]=a.useState(s??[]);return a.useEffect(()=>{s&&d(s)},[s]),o(b,{open:t,title:l,confirmButtonText:"OK",onCancel:f,maxWidth:"md",content:o(h,{formRef:r,value:m,onChange:c=>d(c),onSubmit:i,...u}),onConfirm:()=>{r.current.formElement.current.requestSubmit()}})}try{C.displayName="JSONArrayEditorModal",C.__docgenInfo={description:"",displayName:"JSONArrayEditorModal",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"T[]"}},arrayItemDefinition:{defaultValue:null,description:"",name:"arrayItemDefinition",required:!1,type:{name:"JSONSchema7Definition"}},dialogTitle:{defaultValue:null,description:"",name:"dialogTitle",required:!1,type:{name:"ReactNode"}},isShowingModal:{defaultValue:null,description:"",name:"isShowingModal",required:!0,type:{name:"boolean"}},onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"(value: T[]) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}}}catch{}export{C as J};
//# sourceMappingURL=JSONArrayEditorModal-34cf71e2.js.map
